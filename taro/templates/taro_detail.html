{% extends 'base.html' %}
{% load static %}

{% block active_taro_list %}active{% endblock %}
{% block header%}
<header class="masthead" src="{% static 'assets/img/touroku.png' %}">
    <div class="container position-relative px-4 px-lg-5">
    </div>
</header>
{% endblock %}

{% block contents %}
<div class="container">
    <div class="my-div-style w-100">
        <div class="row">
            <div class="col-9">
                {{ taro.areaname }}
            </div>
        </div>

        <hr>
        <div class="row">
          <div class="col-9">
              {{ user.name }}
          </div>
        </div>

        <hr>
        <div class="row">
          <div class="col-9">
              {{ taro.kenmei }}
          </div>
        </div>

        <hr>
        <div class="row">
          <div class="col-9">
              {{ taro.eki }}
          </div>
        </div>

        <hr>
        <div class="row">
          <div class="col-9">
              {{ taro.okane }}
          </div>
        </div>

        <hr>
        


        <div class="row">
            <div class="col-3">
                <strong>写真</strong>
            </div>
            <div class="col-3">
                {% if taro.photo1 %}
                    <img src="{{ object.photo1.url }}" width="200" height="200"/>
                {% endif %}
            </div>
            <div class="col-3">
                {% if taro.photo2 %}
                    <img src="{{ object.photo2.url }}" width="200" height="200"/>
                {% endif %}
            </div>
            <div class="col-3">
                {% if taro.photo3 %}
                    <img src="{{ object.photo3.url }}" width="200" height="200"/>
                {% endif %}
            </div>
        </div>

        <hr>
        
        {% if user.id == taro.user.id %}
        <div class="row">
            <div class="col-3">
                <strong>作成日時</strong>
            </div>
            <div class="col-9">
                {{ taro.created_at }}
            </div>
        </div>

        <hr>

        <div class="row">
            <div class="col-3">
                <strong>更新日時</strong>
            </div>
            <div class="col-9">
                {{ taro.updated_at }}
            </div>
        </div>
        <a class="btn btn-success mt-5 mb-3" href="{% url 'taro:taro_update' taro.pk %}">編集</a>
        <a class="btn btn-danger mt-5 ml-2 mb-3" href="{% url 'taro:taro_delete' taro.pk %}">削除</a>

        {% else %}
        <form action="{% url 'taro:like_taro' taro.pk %}" method="POST">
            {% csrf_token %}

            {% if user.is_authenticated %}
                {% if liked %}
                <button type="submit" name="taro_id" value="{{ taro.id }}", class="btn btn-danger btn-sm">UnLike</button> 
                {% else %}
                <button type="submit" name="taro_id" value="{{ taro.id }}", class="btn btn-primary btn-sm">Like</button> 
                {% endif %}           
            {% else %}
                <small><a href="{% url 'account_login' %}">Login to like</a></small>
            {% endif %}
            
             - {{ total_likes }}
        </form>
        {% endif %}
        

    </div>
</div>
{% endblock %}